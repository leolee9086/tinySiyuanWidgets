# 这个区段由开发者编写,未经允许禁止AI修改

# 织的笔记

## 2025-05-03 09:37

### 项目原则

*   **重要**: `tinySiyuanWidgets` 仓库只包含不需要额外构建步骤的挂件。所有挂件都应该是开箱即用的静态 HTML/CSS/JS 文件。

### 原因

*   简化用户使用流程，无需安装依赖或运行构建脚本。
*   保持项目结构的清晰和轻量。

## 2025-05-03 09:35

### 功能改进 (根目录)

* 将 `scripts/templates/index.template.html` 中的赞助链接添加到了根目录的 `index.html` 页面，放在了主标题下方。

### 修改原因

* 按照哥哥的要求，将重要的赞助信息展示在项目主页。

## 2025-05-03 09:03

### 功能改进 (weather-widget)

*   天气挂件 (`weather-widget`) 引入了 API 轮询机制，优先尝试 Open-Meteo (无需 Key)，失败后回退至 OpenWeatherMap，显著提高了数据获取的成功率和稳定性。
*   添加了地理编码功能，优化了错误处理和提示。

## 2025-05-03 08:53

### 功能添加

*   添加了新的天气挂件 (`weather-widget`)，(最初) 基于 OpenWeatherMap API。
*   天气挂件支持显示当前天气、体感温度、湿度、风速以及未来几小时的天气预报。
*   支持用户自定义城市和 API Key。
*   美观的界面设计，适配思源笔记的亮色/暗色主题。

## 2025-05-02 23:53

### 功能改进

*   在根目录 `index.html` 的部署设置面板中，API Token 输入框下方添加了醒目的安全警告信息。

### 修改原因

*   响应哥哥的要求，明确提示用户 API Token 的高权限风险。
*   强调了 API Token 能够调用所有思源后端 API，泄露风险极大，建议用户仅在完全信任的环境（如本地运行此页面）下使用，避免在不可信的网页或应用中输入。

## 2025-05-03 09:11

### 功能添加 (markdown-reference)

* 创建了新的 Markdown 语法参考卡片挂件 (`markdown-reference`)
* 实现了常用 Markdown 语法的展示与效果预览，包括标题、强调、列表、链接与图片、引用块、代码块、表格、水平线及思源笔记特有语法
* 添加了点击复制功能，方便用户快速获取语法代码
* 提供列表和网格两种显示模式，并记住用户的显示偏好
* 设计了适配思源笔记亮/暗主题的响应式界面 

## 2025-05-03 09:16

### 功能添加 (calendar-widget)

* 创建了新的日历挂件 (`calendar-widget`)，支持月历视图和日程管理
* 实现了完整的日程CRUD功能（添加、查看、编辑、删除），并使用localStorage持久化存储
* 设计了符合思源笔记风格的界面，支持亮/暗色主题
* 日历展示支持当前月份的完整显示，以及上/下月份的部分日期，便于用户了解月初月末的上下文
* 提供了颜色标记功能，方便用户对不同类型的日程进行分类管理

### 开发过程中的注意事项

* 日期处理是日历应用的核心，需要处理很多边界情况，如月初月末的特殊计算、闰年判断等
* 用户数据存储选择localStorage而非思源API，优点是实现简单、独立性强；但缺点是数据仅限于当前浏览器，跨设备访问时无法同步
* UI设计方面，在保持功能完整的同时，需要控制界面复杂度，确保用户能够轻松理解和操作
* JavaScript中日期对象（Date）的操作容易出错，需要格外注意日期格式化和计算的准确性 

### 2025-05-14 (织)

*   **新增挂件: `installed-widget-lister`**
    *   在 `tinySiyuanWidgets/` 目录下创建了新的挂件 `installed-widget-lister`。
    *   **功能**: 该挂件用于列出当前思源工作空间中所有已安装的挂件。
    *   **实现**:
        *   包含 `widget.json` (挂件描述文件), `index.html` (包含 HTML, CSS, JS 的主文件), `README.md` (说明文档), 和一个占位 `icon.png`。
        *   `index.html` 中的 JavaScript 会尝试调用思源的 `/api/bazaar/getInstalledWidget` API (优先使用 `window.siyuan.fetchPost`，如果不可用则回退到标准 `fetch`) 来获取已安装挂件列表。
        *   获取到的挂件列表会以卡片形式展示，包含挂件名称、作者和版本号。
        *   包含基本的加载状态和错误提示。
    *   **遵从原则**: 挂件是纯静态资源，无需构建步骤，符合 `tinySiyuanWidgets` 项目的既定原则。
*   **更新 `index.html` (根目录)**:
    *   为新创建的 `installed-widget-lister` 挂件在根目录的 `index.html` 预览和部署页面中添加了对应的展示卡片。
    *   卡片包含预览iframe、挂件中英文名称、描述、文件列表（widget.json, index.html, README.md, icon.png）以及预览和部署按钮。
    *   为 `installed-widget-lister` 创建了 `file-list.json` 文件，以便 `index.html` 中的部署脚本能正确识别其文件。
*   **记录时间**: 2025-05-14 13:03:21 GMT+0800 (中国标准时间) 